# Copyright 2005-2016 ECMWF.
#
# This software is licensed under the terms of the Apache Licence Version 2.0
# which can be obtained at http://www.apache.org/licenses/LICENSE-2.0.
# 
# In applying this licence, ECMWF does not waive the privileges and immunities granted to it by
# virtue of its status as an intergovernmental organisation nor does it submit to any jurisdiction.
#

# TEMPLATE 3.30, Lambert conformal
include "grib2/template.3.shape_of_the_earth.def";

unsigned[4] Nx  : dump;
alias Ni  = Nx;
alias numberOfPointsAlongXAxis  = Nx;
alias geography.Nx=Nx;

unsigned[4] Ny  : dump;
alias Nj  = Ny;
alias numberOfPointsAlongYAxis  = Ny;
alias geography.Ny=Ny;

include "grib2/template.3.30.part1.def"

include "grib2/template.3.resolution_flags.def";

include "grib2/template.3.30.part2.def"

#  Dx - X-direction grid length
# NOTE 1 NOT FOUND
unsigned[4] Dx : edition_specific ;
alias xDirectionGridLength=Dx;
alias Di =  Dx;
meta  geography.DxInMetres scale(Dx,one,thousand) : dump;

#  Dy - Y-direction grid length
# NOTE 1 NOT FOUND
unsigned[4] Dy : edition_specific ;
alias yDirectionGridLength=Dy ;
alias Dj =  Dy;
meta  geography.DyInMetres scale(Dy,one,thousand) : dump;

include "grib2/template.3.30.part3.def"

include "grib2/template.3.scanning_mode.def";

include "grib2/template.3.30.part4.def"

iterator lambert_conformal(numberOfPoints,missingValue,values,
          radius,Nx,Ny,
          LoVInDegrees,LaDInDegrees,
          Latin1InDegrees,Latin2InDegrees,
          latitudeOfFirstGridPointInDegrees,longitudeOfFirstGridPointInDegrees,
          DxInMetres,DyInMetres,
          iScansNegatively,
          jScansPositively,
          jPointsAreConsecutive,
          alternativeRowScanning);

nearest lambert_conformal(values,radius,Nx,Ny);

meta latLonValues latlonvalues(values);
alias latitudeLongitudeValues=latLonValues;
meta latitudes latitudes(values,0);
meta longitudes longitudes(values,0);

